# Task 03

> Tên tài liệu: Upload file lên hệ thống.

> Thực hiện: Nguyễn Minh Nhật

> Cập nhật lần cuối: 11/02/2017

## Mục lục:

[1.Upload file. ](#upfile)

## Nội dung.

<a name="upfile"></a>

### 1. Upload file.

- Ta có form upload file như sau:

```javascript

<form action="action_upload_file.php" method="post" enctype="multipart/form-data">

<input type="file" name="upfile"><br><br>

<input type="submit" name="submit" value="Upload">

</form>

```

![a](http://imageshack.com/a/img924/5550/lLKnO1.png)

### Ta có 1 script xử lí upload tên `action_upload_file.php` như sau:

```javascript

if($_POST['submit'])
{
	$tmp_name = $_FILES['upfile']['tmp_name'];
	// khai báo tên file tmp, tmp là các file đc tạo ra như 1 bộ đệm trong quá trình xử lí các chương trình.
															
	$dir = "uploadfile/";// Khai báo thư mục upload file lên.
	
	$name = $_FILES['upfile']['name'];
  	// Khai báo tên file.
	
	$check_type_file = pathinfo($dir.$name,PATHINFO_EXTENSION); 
  	// Hàm này trả về phần bổ sung của file từ file upload vd php,txt,img....
  
		if(isset($name))   
		{
			if(!empty($name))   
			{   
				$check = 1; // Cho biến $check = 1.   
				if(file_exists($dir.$name))
            			// Kiểm tra file đã tồn tại hay chưa bằng hàm file_exists()
            
				{
				echo "File da ton tai ! <br>";
				// Thông báo nếu file đã tồn tại và chán $check = 0.              
				$check = 0;
					}            
					if($_FILES['upfile']['size'] > 800000) 	// Kiểm tra kích thước của file.
					{            
						echo "Kich thuoc file qua lon <br> ";             
						$check = 0;
					}
						if($check_type_file!="jpg"&&$check_type_file!="png"&&$check_type_file!="jpeg"&&$check_type_file!="gif"&&$check_type_file!="img")
            // Trường hợp này chỉ cho upload các fiel hình ảnh, không upload được các file khác.
            
					{            
						$check = 0;              
						echo "Format file chi cho phep cac format JPG, JPEG, PNG, GIF, IMG <br>";              
						echo "Dinh dang file vua up len la ".$check_type_file;             
					}         
						if($check!=0) 
						// Kiểm tra nếu check khác 0 thì được quyền upfile.
					{  	
					if(move_uploaded_file($tmp_name,$dir.$name)) 
						// sử dụng hàm move_uploaded_file() để upload file lên.               
						{                    
							echo "Upload success !";                        
						}else                   
						{                     
							echo "No";                       
						}                     
						}else                 
						{                 
							echo "File khong duoc upload ! ";                    
						}						
				}else        
				{        
				echo "please choose file !";          
				}        
		}    
}

```

### Chạy thử và kiểm tra các trường hợp.

-  Thử upload 1 file lên.

![a](http://imageshack.com/a/img923/8200/SxcHa4.png)

- Upload thành công rồi.

![a](http://imageshack.com/a/img923/5385/ngjxjA.png)

- Kiểm tra thư mục `uploadfile`.

![a](http://imageshack.com/a/img924/8753/zXnxLC.png)

- Xuất hiện file vừa upload.


### **Thanks for watching !**
