# Task 27

> Tên tài liệu: Javascript 2.

> Thực hiện: Nguyễn Minh Nhật

> Cập nhật lần cuối: 21/04/2017

## Mục lục:

[1.Logical operators.](#1)

[2.Loops: while and for.](#2)

[3.The "switch" statement.](#3)

[4.Functions](#4)

[5.Function expressions and arrows](#5)

[6.JavaScript specials](#6)

## Nội dung.

### Logical operators

<a name="1"></a>

### OR (||)

```javascript
alert( true || true );   // true
alert( false || true );  // true
alert( true || false );  // true
alert( false || false ); // false
```
- trả về `true` khi 1 trong những điều kiện là đúng, và trả về `false` khi tất cả là sai

#### OR seeks the first truthy value (OR tìm kiếm giá trị xác thực đầu tiên)

- Syntax: `result = value1 || value2 || value3`

- đánh giá các toán tử từ trái sang phải

- đối với mỗi giá trị, chuyển đổi nó về `boolean`, nếu true thì dừng lại và trả về giá trị đó.

- Nếu operand kết thúc rả về giá trị cuối cùng

```javascript
alert( 1 || 0 ); // 1 (1 is truthy)
alert( true || 'no matter what' ); // (true is truthy)

alert( null || 1 ); // 1 (1 is the first truthy value)
alert( null || 0 || 1 ); // 1 (the first truthy value)
alert( undefined || null || 0 ); // 0 (all falsy, returns the last value)
```

**1.Getting the first truthy value from the list of variables or expressions**

- ví dụ chúng ta có 1 số biến, chúng có thể chứa những dữ liệu or null/undefined, và chúng ta cần chọn cái đầu tiên với data -> khi đó ta sử dụng OR

```javascript
let currentUser = null;
let defaultUser = "John";

let name = currentUser || defaultUser || "unnamed";

alert( name ); // selects "John" – the first truthy value
```

- Nếu mà `defaultUser` là falsy thì nó sẽ in ra unnamed

### && (AND)

- đúng khi cả 2 cùng đúng, và sai khi 1 trong 2 sai.

```javascript
alert( true && true );   // true
alert( false && true );  // false
alert( true && false );  // false
alert( false && false ); // false
```

#### AND seeks the first falsy value (tìm kiếm sai lệch đầu tiên )

- syntax: `result = value1 && value2 && value3`

- đánh giá các phần tử từ trái qua phải

- qua mỗi giá trị chuyển đổi nó thành `boolean`, nếu kết quả là `false` dừng lại và trả về giá trị ban đầu đó.

- nếu đánh giá qua hết tất cả các giá trị đều đúng hết -> trả về giá trị cuối cùng.

- giống như `OR`, khác nhau cơ bản của 2 cái đó là `OR` trả về giá trị đúng đầu tiên, còn `AND` thì trả về giá trị sai đầu tiên

```javascript
// if the first operand is truthy,
// AND returns the second one:
alert( 1 && 0 ); // 0
alert( 1 && 5 ); // 5

// if the first operand is falsy,
// AND returns it, and the second one is ignored
alert( null && 5 ); // null
alert( 0 && "no matter what" ); // 0

alert( 1 && 2 && null && 3 ); // null

alert( 1 && 2 && 3 ); // 3, the last one
```

- thứ tự ưu tiên của phép `AND` cao hơn phép `OR`

```javascript
alert( 5 || 1 && 0 ); // 5
```

### ! (NOT)

- syntax: `result = !value;`

- chuyển đổi các operand thành boolean type `true/false`

- trả về giá trị nghịch đảo của nó

- đôi lúc ta dùng `!!` để chuyển đổi giá trị thành kiểu boolean or có thể sử dụng hàm `Boolean()` để chuyển đổi

```javascript
alert( !!"non-empty string" ); // true
alert( !!null ); // false

alert( Boolean("non-empty string") ); // true
alert( Boolean(null) ); // false
```

### Task

- **What's the result of OR ?**

```javascript
alert( null || 2 || undefined );// 5
```

- **What's the result to OR'ed alerts?**

```javascript
alert( alert(1) || 2 || alert(3) ); // 1 sau đó 2
```

- vì hàm alert() không trả về 1 giá trị or nó trả về `undefined` -> sau đó nó xét tới 2, 2 trả về true thì nó dừng lại và trả về 2, alert(3) được bỏ qua.

- **What is the result of AND ?**

```javascript
alert( 1 && null && 2 );// null
```

- **What is the result of AND'ed alerts?**

```javascript
alert( alert(1) && alert(2) );// 1 sau đó undefined
```

- alert(1) -> in ra 1, sau đó gặp alert(2) -> trả về `undefined` và dừng lại

- **The result of OR AND OR**

```javascript
alert( null || 2 && 3 || 4 );// 3
```

- đầu tiên phép `&&` được ưu tiên trước nó trả về 3, vì các phần tử đề đúng nên nó trả về phần tử cuối cùng là 3

- sau đó nó tiếp tục xét từ trái qua phải phép `OR` gặp giá trị thứ 2 là 3 -> trả về true -> nên kết quả là 3

- **Check the range between**

- sử dụng câu điều kiện `if` để check tuổi giữa 14 và 90

```javascript
if(age >= 14 && age <= 90)
```

- **Check the range outside**

- sử dụng if để check age là NOT nữa 14 và 90

```javascript
- sử dụng !

if (!(age >= 14 && age <= 90))

- không sử dụng !

if (age < 14 || age > 90)
```

- **A question about "if"**

```javascript
if (-1 || 0) alert( 'first' ); // OK
if (-1 && 0) alert( 'second' ); // No
if (null || -1 && 1) alert( 'third' );// OK -> -1 && 1 -> ra 1 rồi null || 1 -> OK
```

### Loops: while and for

<a name="2"></a>

### Task

- **Last loop value**

```javascript
let i = 3;

while (i) {
  alert( i-- );
}
```

- Mỗi vòng lập giảm i xuống 1 đơn vị

- **Which values shows the while?**

- 1.prefix form `++i`

```javascript
let i = 0;
while (++i < 5) alert( i );
```

- mỗi vòng lập tăng i lên 1, điều kiện dừng là < 5 -> show ra 1,2,3,4

- 2.The prefix form i++

```javascript
let i = 0;
while (i++ < 5) alert( i );
```

- mỗi vòng lập tăng i lên 1, điều kiện dừng là < 5, vì i++ lấy i trước rồi mới tăng nên show 1,2,3,4,5

- **Which values get shown by the "for" loop?**

- 1.postfix form

```javascript
for (let i = 0; i < 5; i++) alert( i );
```

- show 0,1,2,3,4

- 2.postfix form

```javascript
for (let i = 0; i < 5; ++i) alert( i );
```

- show 0,1,2,3,4,5

- **Output even numbers in the loop**

```javascript
let i=2;
for(i;i<11;i++)
{
alert(i);
}
```

- **Replace "for" with "while"**

```javascript
for (let i = 0; i < 3; i++) {
  alert( `number ${i}!` );
}
```

- chuyển sang while

```javascript
let i = 0;
while (i < 3) {
  alert( `number ${i}!` );
  i++;
}
```

- **Repeat until the input is incorrect**

- viết vòng lập nhận đầu vào của người dùng với prompt với 1 số lớn hơn 100, nếu người dùng nhập 1 số khác - hỏi người dùng nhập lại.

- dừng lại cho đến khi người dùng nhập số lớn hơn 100 or cancel
```javascript
let num;

do {
  num = prompt("Enter a number greater than 100?", 0);
} while (num <= 100 && num);
```

- **Output prime number**

- Viết code output số nguyên tố từ 2 đến n

- vd n = 10 -> 2,3,5,7

```javascript
let n = 10;

nextPrime:
for (let i = 2; i <= n; i++) 

  for (let j = 2; j < i; j++) 
    if (i % j == 0)
  }

  alert( i ); 
```

### The "switch" statement

<a name="3"></a>

- syntax:

```javascript
switch(x) {
  case 'value1':  // if (x === 'value1')
    ...
    [break]

  case 'value2':  // if (x === 'value2')
    ...
    [break]

  default:
    ...
    [break]
}
```
### Task

- **Rewrite the "switch" into an "if"**

```javascript
  switch (browser) {
  case 'Edge':
    alert( "You've got the Edge!" );
    break;

  case 'Chrome':
  case 'Firefox':
  case 'Safari':
  case 'Opera':
    alert( 'Okay we support these browsers too' );
    break;

  default:
    alert( 'We hope that this page looks ok!' );
}
```
- Viết lại sử dụng if/else

```javascript


if(browser == 'Edge') {
  alert("You've got the Edge!");
} else if (browser == 'Chrome'
 || browser == 'Firefox'
 || browser == 'Safari'
 || browser == 'Opera') {
  alert( 'Okay we support these browsers too' );
} else {
  alert( 'We hope that this page looks ok!' );
}
```

- **Rewrite "if" into "switch"**

```javascript
let a = +prompt('a?', '');

if (a == 0) {
  alert( 0 );
}
if (a == 1) {
  alert( 1 );
}

if (a == 2 || a == 3) {
  alert( '2,3' );
}
```

- viết lại sử dụng switch

```javascript
let a = +prompt('a?', '');

switch (a) {
  case 0:
    alert( 0 );
    break;

  case 1:
    alert( 1 );
    break;

  case 2:
  case 3:
    alert( '2,3' );
    break;
}
```

### Functions

<a name="4"></a>

- syntax:

```javascript
function tên_hàm(value1,value2...)
{
code...
}

tên_hàm(truyền tham số);//gọi hàm
```

### Task


- **Is "else" required?**

- cho phép function trả về `true` nếu thông số age lớn hơn 18

- ngược lại nó hỏi 1 xác nhận và trả về nó 1 kết quả:

```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } else {
    return confirm('Did parents allow you?');
  }
}

let age = prompt('Nhap tuoi','0');
if(checkAge(age))
{
alert('ok');
}else
{
alert('No');
}
```

```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } 
    return confirm('Did parents allow you?');
  
}

let age = prompt('Nhap tuoi','0');
if(checkAge(age))
{
alert('ok');
}else
{
alert('No');
}
```

- có sự khác nhau giữa 2 thằng này không -> không có sự khác nhau

- **Rewrite the function using '?' or '||'**

```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } else {
    return confirm('Did parents allow you?');
  }
}
```

- viết lại như trên, nhưng không có `if`, trên 1 dòng

- 1. sử dụng '?'

- 2. sử dung OR (||)

```javascript
1.
function checkAge(age) {
  return (age > 18) ? true : confirm('Did parents allow you?');
}
```

```javascript
2.
function checkAge(age) {
  return (age > 18) || confirm('Did parents allow you?');
}
```

- **Function min(a,b)**

- viết 1 function min(a,b) mà trả về ít nhất 2 số a và b

```javascript
ví dụ
min(2, 5) == 2
min(3, -1) == -1
min(1, 1) == 1

- code
function min(a, b) {
  if (a < b) {
    return a;
  } else {
    return b;
  }
}
```

### Function expressions and arrows

<a name="5"></a>

- cú pháp thông thường

```javascript
function sayHi() {
  alert( "Hello" );
}
```

- 1 syntax khác được gọi là `Function Expression`

```javascript
let sayHi = function() {
	alert("Hello");
};
```

- lúc này hàm chỉ là 1 giá trị được chứa trong biến `sayHi`

- tạo 1 function và đặt nó vào trong biến `sayHi` dùng alert in ra value

```javascript
function sayHi() {
  alert( "Hello" );
}

alert( sayHi ); // shows the function 

- nó sẽ show ra

 function sayHi() {
  alert( "Hello" );
}
```

- chúng ta có thể copy 1 function bằng cách sau

```javascript
function sayHi() {   // (1) create
  alert( "Hello" );
}

let func = sayHi;    // (2) copy

func(); // Hello     // (3) run the copy (it works)!
sayHi(); // Hello    //     this still works too 
```

- Chúng ta cũng có thể sử dụng Function Expression để khai báo `sayHi`

```javascript
let sayHi = function() { ... };// vì lưu trong 1 biến nên phải có dấu ';' để kết thúc khối lệnh 

let func = sayHi;
// ...
```

### Callback functions

- chúng ta viết 1 function `ask(question, yes, no)` có 3 thông số.

- `question`: text of question

- `yes`: function chạy nếu answer là "Yes"

- `no`: function chạy nếu answer là "No"

- function sẽ hỏi `question` và phụ thuộc vào câu trả lời của user, call yes() or no()

```javascript
function ask(question, yes, no) {
  if (confirm(question)) yes()
  else no();
}

function showOk() {
  alert( "You agreed." );
}

function showCancel() {
  alert( "You canceled the execution." );
}

// usage: functions showOk, showCancel are passed as arguments to ask
ask("Do you agree?", showOk, showCancel);
```

- chúng ta cũng có thế sử dụng Function Expressions để viết như sau

```javascript
function ask(question, yes, no) {
  if (confirm(question)) yes()
  else no();
}

ask(
  "Do you agree?",
  function() { alert("You agreed."); },
  function() { alert("You canceled the execution."); }
);
```

### Function Expression vs Function Declaration

- Function Declaration

```javascript
function sum(a, b) {
  return a + b;
}
```

- Function Expression

```javascript
let sum = function(a, b) {
  return a + b;
}
```

- hoạt động khác nhau của 2 cái này nè


```javascript
sayHi("John"); // Hello, John

function sayHi(name) {
  alert( `Hello, ${name}` );
}
```

```javascript
sayHi("John"); // error!

let sayHi = function(name) {  // (*) no magic any more
  alert( `Hello, ${name}` );
};
```

### Function Declaration in a block

- code dưới này không hoạt động nhé

```javascript
let age = prompt("What is your age?", 18);

if (age < 18) {

  function welcome() {
    alert("Hello!");
  }

} else {

  function welcome() {
    alert("Greetings!");
  }

}

welcome(); // Error: welcome is not defined
```
- Function Declaration chỉ hoạt động trong 1 khối thôi nhé

```javascript
let age = 16; // take 16 as an example

if (age < 18) {
  welcome();               // \   (runs)
                           //  |
  function welcome() {     //  |
    alert("Hello!");       //  |  Function Declaration is available
  }                        //  |  everywhere in the block where it's declared
                           //  |
  welcome();               // /   (runs)

} else {
                           // \
  function welcome() {     //  |
    alert("Greetings!");   //  |  if age=16, the the execution does not go here,
  }                        //  |  so this "welcome" is never created
                           // /
}

// Here we're out of figure brackets,
// so we can not see Function Declarations made inside of them.

welcome(); // Error: welcome is not defined

```

### Arrow function

- tạo 1 function rất đơn giản và ngắn gọn nó gọi là `arrow function`, trông như vầy nè

- `let func = (arg1, arg2, ...argN) => expression`

- xem 1 vài ví dụ nhé

```javascript
let sum = (a, b) => a + b;

alert( sum(1, 2) ); // 3
```

```javascript
// let double = function(n) { return n*2 }
let double = n => n*2;

alert( double(3) ); // 6
```

```javascript
let age = prompt("What is your age?", 18);

let welcome = (age < 18) ?
  () => alert('Hello') :
  () => alert("Greetings!");

welcome(); // ok now
```

```javascript
let sum = (a, b) => {  // the figure bracket opens a multiline function
  let result = a + b;
  return result; // if we use figure brackets, must use return
};

alert( sum(1, 2) ); // 3
```

### Task

- Thay thế Function Expressions với arrow function in code sau

```javascript
function ask(question, yes, no) {
  if (confirm(question)) yes()
  else no();
}

ask(
  "Do you agree?",
  function() { alert("You agreed."); },
  function() { alert("You canceled the execution."); }
);
```

- chuyển thành nè

```javascript
function ask(question, yes, no) {
  if (confirm(question)) yes()
  else no();
}

ask(
  "Do you agree?",
  () => alert("You agreed."),
  () => alert("You canceled the execution.")
);
```

### JavaScript specials

<a name="6"></a>

#### Code structure

- mỗi câu lệnh được phân tách bởi dấu `;`

```javascript
alert('Hello'); alert('World');
```

- đôi khi 1 dấu ngắt dòng cũng là 1 dấu phân tách nhé

```javascript
alert('Hello')
alert('World')
```

- chú ý đôi khi dấu ngắt dòng hỗng có làm việc đâu nhé

```javascript
alert("There will be an error after this message")

[1, 2].forEach(alert)// no no
```

- nên đặt dấu `;` vào cuối mỗi câu lệnh nhé

### Strict mode

- để kích hoạt đầy đủ các tính năng mới của Javascript chúng ta sử dụng `use strict`

- Ôn lại không hà 

```javascript
// expression at the right side
let sum = (a, b) => a + b;

// or multiline syntax with { ... }, need return here:
let sum = (a, b) => {
  // ...
  return a + b;
}

// without arguments
let sayHi = () => alert("Hello");

// with a single argument
let double = n => n * 2;
```

## Thanks for watching ^^

